<!DOCTYPE html><html lang="zh-CN"><head><meta name="google-site-verification" content="_s8zp9HC5xK3I7RCh_8RJrSUgYtyNgc09bZvTV11nFI"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="imbant å‰ç«¯å·¥ç¨‹å¸ˆæŠ€æœ¯åšå®¢"><meta name="keywords" content="å‰ç«¯,imbant,æŠ€æœ¯åšå®¢,æµè§ˆå™¨,Electron,React,Vue,Node,Webpack,Vite,Chrome"><title>å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä¸å®ç° | imbAnt's blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZM9NGRYKWS"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-ZM9NGRYKWS');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä¸å®ç°</h1><a id="logo" href="/blog/.">imbAnt's blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/blog/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/blog/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container">Hi ğŸ‘‹ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢
æˆ‘æ˜¯ä¸€åå‰ç«¯å¼€å‘è€…ï¼ŒVS Code æ’ä»¶å’Œè¯­è¨€æœåŠ¡å™¨å¼€å‘è€…
æˆ‘ç›®å‰æ­£åœ¨æ„å»ºåŸºäº LSP çš„ <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=craftLandstudio.ffugclanguage">è¯­è¨€æœåŠ¡å™¨</a>ï¼Œä¹Ÿåœ¨ç»´æŠ¤ç”¨ Go æ„å»ºçš„ç¼–è¯‘å™¨ã€‚
åœ¨<a href="/about/">è¿™é‡Œ</a>æŸ¥çœ‹æ›´å¤šå…³äºæˆ‘çš„ä¿¡æ¯<br>æˆ‘å¸Œæœ›é€šè¿‡è¿™ä¸ªåšå®¢è®°å½•æŠ€æœ¯çŸ¥è¯†ï¼Œæå‡å½±å“åŠ›ã€‚å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™äº›æ–‡ç« ï¼š<br><a href="/2024/10/29/VS-Code-Thankyou/">æˆ‘ä¸º VS Code è´¡çŒ®äº†ä»£ç </a><br><a href="2024/08/24/LSP1/">LSP ä¸ VS Code æ’ä»¶å¼€å‘ ç¬¬ä¸€ç« </a><br><a href="2023/03/30/æ€ä¹ˆè®©-favicon-åŠ¨èµ·æ¥/">æ€ä¹ˆè®© favicon åŠ¨èµ·æ¥</a><div class="post"><h1 class="post-title">å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä¸å®ç°</h1><div class="post-meta">2021-09-28</div><div class="post-content"><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä»æµè§ˆå™¨åº•å±‚ api è¯´èµ·ï¼Œç»“åˆæµè§ˆå™¨æ¸²æŸ“åŸç†ï¼Œè‡ªåº•å‘ä¸Šè°ˆè°ˆå‰ç«¯æ€§èƒ½ç›‘æ§çš„æŒ‡æ ‡å…·ä½“éƒ½æ˜¯å¦‚ä½•å®ç°çš„</p>
<h2 id="Navigation-Timing-æ ‡å‡†"><a href="#Navigation-Timing-æ ‡å‡†" class="headerlink" title="Navigation Timing æ ‡å‡†"></a>Navigation Timing æ ‡å‡†</h2><p>W3C æä¾›äº†æµ‹è¯• Web App æ€§èƒ½ç‰¹å¾çš„<a target="_blank" rel="noopener" href="https://www.w3.org/TR/navigation-timing-2/">è§„èŒƒ</a>ï¼Œå’Œæ—¶é—´æ¨¡å‹ï¼š</p>
<p><img src="https://imbant-blog.oss-cn-shanghai.aliyuncs.com/blog-img/1/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87%E4%B8%8E%E5%AE%9E%E7%8E%B0.svg" alt="img"></p>
<h2 id="æµè§ˆå™¨å®ç°"><a href="#æµè§ˆå™¨å®ç°" class="headerlink" title="æµè§ˆå™¨å®ç°"></a>æµè§ˆå™¨å®ç°</h2><h3 id="window-performance-å¯¹è±¡"><a href="#window-performance-å¯¹è±¡" class="headerlink" title="window.performance å¯¹è±¡"></a>window.performance å¯¹è±¡</h3><p>æµè§ˆå™¨é€šè¿‡ <code>performance</code> å¯¹è±¡å®ç°è¿™ä¸€è§„èŒƒã€‚å›¾é‡Œçš„å„ä¸ªæŒ‡æ ‡ï¼Œå¯ä»¥åœ¨ <code>window.performance.timing</code> å¯¹è±¡ä¸­æ‹¿åˆ°ã€‚è¿™äº›å­—æ®µçš„å€¼ä¸ºäº‹ä»¶å‘ç”Ÿæ—¶çš„ <code>UNIX æ—¶é—´æˆ³</code>ã€‚</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶</th>
<th>æ„ä¹‰</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>fetchStart</code></td>
<td>æµè§ˆå™¨å‡†å¤‡å¥½ä½¿ç”¨ http è¯·æ±‚ï¼ˆfetchï¼‰æ–‡æ¡£æ—¶</td>
<td></td>
</tr>
<tr>
<td><code>domainLookupStart</code></td>
<td>å¼€å§‹ dns è§£ææ—¶</td>
<td>å¦‚æœç”¨äº†æŒç»­è¿æ¥ï¼ˆpersistent connectionï¼‰ï¼Œæˆ–è€…ä¿¡æ¯å‘½ä¸­ç¼“å­˜æˆ–è€…æœ¬åœ°èµ„æºä¸Šï¼Œå°†å’Œ <code>fetchStart</code> ç›¸åŒ</td>
</tr>
<tr>
<td><code>domainLookupEnd</code></td>
<td>dns è§£æç»“æŸæ—¶</td>
<td>åŒä¸Šï¼Œå¯èƒ½ç­‰äº <code>fetchStart</code></td>
</tr>
<tr>
<td><code>connectStart</code></td>
<td>å¼€å§‹ tcp è¿æ¥æ—¶</td>
<td>å¦‚æœä½¿ç”¨æŒä¹…é“¾æ¥ï¼ˆpersistent connectionï¼‰ï¼Œå°†å’Œ <code>fetchStart</code> ç›¸åŒï¼ˆåŒä¸Šï¼Œ æ— éœ€ dns è§£æï¼‰ </td>
</tr>
<tr>
<td><code>secureConnectionStart(å¯é€‰)</code></td>
<td>å¼€å§‹ ssl å®‰å…¨è¿æ¥æ—¶</td>
<td>HTTPS åè®®æœ‰è¿™ä¸€æ­¥ï¼Œå¦åˆ™ä¸º 0</td>
</tr>
<tr>
<td><code>connectEnd</code></td>
<td>ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼ˆæ¡æ‰‹å’Œè®¤è¯è¿‡ç¨‹å…¨éƒ¨ç»“æŸï¼‰æ—¶</td>
<td>åŒä¸Šï¼Œå¯èƒ½ç­‰äº <code>fetchStart</code></td>
</tr>
<tr>
<td><code>requestStart</code></td>
<td>å‘æœåŠ¡å™¨å‘å‡º http è¯·æ±‚/è¯»å–æœ¬åœ°ç¼“å­˜/è¯»å–æœ¬åœ°èµ„æºæ—¶</td>
<td></td>
</tr>
<tr>
<td><code>responseStart</code></td>
<td>ä»æœåŠ¡å™¨æ”¶åˆ°é¦–å­—èŠ‚æ—¶</td>
<td></td>
</tr>
<tr>
<td><code>responseEnd</code></td>
<td>ä»æœåŠ¡å™¨æ”¶åˆ°æœ€åä¸€ä¸ªå­—èŠ‚æ—¶</td>
<td></td>
</tr>
<tr>
<td><code>domLoading</code></td>
<td>å¼€å§‹è§£æ DOM æ ‘æ—¶</td>
<td><code>document.readyState = &#39;loading&#39;</code>ï¼Œè§¦å‘ <code>readystatechange</code> äº‹ä»¶</td>
</tr>
<tr>
<td><code>domInteractive</code></td>
<td>å·²ç»ç”Ÿæˆ DOM æ ‘æ—¶</td>
<td><code>document.readyState = &#39;interactive&#39;</code>ï¼Œè§¦å‘ <code>readystatechange</code> äº‹ä»¶ã€‚DOM å¯¹è±¡å¯ä»¥è¢«è®¿é—®ï¼Œå¯ä»¥æ‰§è¡Œä¾‹å¦‚<code>document.createElement</code> <code>document.body.appendChild</code></td>
</tr>
<tr>
<td><code>domContentLoadedEventStart</code></td>
<td>æ‰€æœ‰éœ€è¦è¢«æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«è§£ææ—¶</td>
<td>è§¦å‘ <code>DOMContentLoaded</code> äº‹ä»¶ä¹‹å‰</td>
</tr>
<tr>
<td><code>domContentLoadedEventEnd</code></td>
<td>æ‰€æœ‰éœ€è¦è¢«æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«æ‰§è¡Œæ—¶</td>
<td>async çš„è„šæœ¬é™¤å¤–</td>
</tr>
<tr>
<td><code>domComplete</code></td>
<td>HTML è§£æå®Œæˆæ—¶</td>
<td><code>document.readyState = &#39;complete&#39;</code>ï¼Œè§¦å‘ <code>readystatechange</code> äº‹ä»¶</td>
</tr>
<tr>
<td><code>loadEventStart</code></td>
<td>è§¦å‘ <code>load</code> äº‹ä»¶æ—¶</td>
<td>è¿˜æ²¡è§¦å‘æ—¶ä¸º0</td>
</tr>
<tr>
<td><code>loadEventEnd</code></td>
<td><code>load</code> äº‹ä»¶ç»“æŸæ—¶</td>
<td>è¿˜æ²¡å®Œæˆæ—¶ä¸º0 TODO: æ˜¯æŒ‡ load äº‹ä»¶çš„ handler å‡½æ•°æ‰§è¡Œå®Œæˆå—ï¼Ÿ</td>
</tr>
</tbody></table>
<blockquote>
<p>åŒ…æ‹¬è¡¨ä¸­æ‰€è¿°åœ¨å†…ï¼Œè¿˜æœ‰ä¸€äº›<strong>å¯¼èˆªç›¸å…³</strong>å±æ€§ï¼šnavigationStartã€unloadEventStartã€unloadEventEndã€redirectStartã€redirectEnd ã€Œä¸å†æœ‰æœ›æˆä¸ºæ ‡å‡†ã€ï¼Œæœªæ¥ç”± <code>PerformanceNavigationTiming</code> ä»£æ›¿</p>
</blockquote>
<h3 id="è§£æé™æ€èµ„æº"><a href="#è§£æé™æ€èµ„æº" class="headerlink" title="è§£æé™æ€èµ„æº"></a>è§£æé™æ€èµ„æº</h3><p>åœ¨è§£æ HTML è¿‡ç¨‹ä¸­ï¼Œå¯¹ä»¥ä¸‹é™æ€èµ„æºï¼š</p>
<ol>
<li>å›¾ç‰‡èµ„æºï¼šå¼‚æ­¥ä¸‹è½½ï¼Œä¸é˜»å¡è§£æ HTML</li>
<li>css èµ„æºï¼šå¼‚æ­¥ç”Ÿæˆ CSSOMï¼Œä¸é˜»å¡æ„å»º DOM æ ‘ï¼Œ<strong>é˜»å¡æ¸²æŸ“</strong>ï¼ˆåˆå¹¶ DOM æ ‘å’Œ CSSOM æ ‘ï¼Œä¹‹åç”Ÿæˆ render æ ‘ï¼Œè®¡ç®—å°ºå¯¸ã€ç»˜åˆ¶åƒç´ ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼‰ï¼Œ<strong>é˜»å¡åç»­ JS çš„æ‰§è¡Œ</strong></li>
<li>js èµ„æºï¼šæ ¹æ® <code>script</code> çš„ <code>defer</code> å’Œ <code>async</code> ä¸¤ä¸ªå±æ€§ï¼š<ul>
<li>éƒ½æ²¡æœ‰æ—¶ä¼šé˜»å¡è§£æï¼Œéœ€è¦ç­‰èµ„æºä¸‹è½½å®Œæˆå¹¶ä¸”<strong>æ‰§è¡Œ</strong>åï¼Œæ‰ä¼šç»§ç»­è§£æ</li>
<li><code>async</code>æ—¶å¹¶è¡Œä¸‹è½½èµ„æºï¼Œä¸ä¼šé˜»å¡è§£æå’Œæ‰§è¡Œï¼Œä¸‹è½½å®Œæˆç«‹å³æ‰§è¡Œï¼ˆå¹¶ä¸”<strong>é˜»å¡å½“å‰è§£æ</strong>ï¼‰ï¼Œæ‰€ä»¥<strong>ä¸ä¼š</strong>ä¸¥æ ¼æŒ‰ç…§æ ‡ç­¾çš„å‰åé¡ºåºæ‰§è¡Œã€‚å¦‚æœä¾èµ– DOM æ ‘æˆ–è€…å¯¹å…¶ä»–è„šæœ¬æœ‰ä¾èµ–ï¼Œå¯èƒ½å‡ºé”™</li>
<li><code>defer</code>æ—¶å¹¶è¡Œä¸‹è½½èµ„æºï¼Œä¸ä¼šé˜»å¡è§£æå’Œæ‰§è¡Œï¼Œä¼šåœ¨ <code>domInteractive</code> ï¼ˆç”Ÿæˆ DOM æ ‘ï¼‰ä¹‹åï¼Œ<code>domContentLoaded</code> ä¹‹å‰æ‰§è¡Œã€‚æ•ˆæœå°±åƒæ”¾åœ¨ <code>body</code> æœ€åçš„ <code>script</code></li>
</ul>
</li>
</ol>
<h3 id="lt-script-gt-çš„-async-ä¸-defer"><a href="#lt-script-gt-çš„-async-ä¸-defer" class="headerlink" title="&lt;script/&gt; çš„ async ä¸ defer"></a>&lt;script/&gt; çš„ async ä¸ defer</h3><ul>
<li>async æ˜¯ã€Œå¼‚æ­¥ã€ï¼Œdefer æ˜¯ã€Œå»¶è¿Ÿã€ã€‚defer å¯ä»¥é˜»æ­¢ <code>domContentLoaded</code> äº‹ä»¶ç›´åˆ°è„šæœ¬æ‰§è¡Œå®Œï¼ˆTODO: è§„èŒƒå¦‚æ­¤ï¼Œæµè§ˆå™¨å®ç°å¯èƒ½ä¸åŒï¼‰</li>
<li>async æ— æ³•ä¿è¯æ‰§è¡Œé¡ºåºå’Œæ ‡ç­¾é¡ºåºä¸€è‡´ï¼Œdefer å¯ä»¥</li>
<li>defer å…¼å®¹æ€§æ›´å¥½ï¼Œasync ä¼˜å…ˆçº§æ›´é«˜ã€‚æœ‰ <code>&lt;script async defer /&gt;</code> çš„ç”¨æ³•ï¼Œæ”¯æŒ async çš„æµè§ˆå™¨ä¼šä¼˜å…ˆç”Ÿæ•ˆï¼Œå¦åˆ™é™çº§åˆ° deferï¼ŒåŒæ ·ä¸é˜»å¡åç»­è§£æï¼Œä½“éªŒæ›´å¥½</li>
<li>ES module TODO: å¾…è¡¥å……</li>
</ul>
<h3 id="DOMContentLoadedã€load-äº‹ä»¶"><a href="#DOMContentLoadedã€load-äº‹ä»¶" class="headerlink" title="DOMContentLoadedã€load äº‹ä»¶"></a>DOMContentLoadedã€load äº‹ä»¶</h3><p>DOMContentLoaded äº‹ä»¶ä¼šåœ¨å®Œæˆè§£æ HTML ä¹‹åè§¦å‘ã€‚load éœ€è¦ç­‰æ‰€æœ‰èµ„æºï¼ˆåŒ…æ‹¬å›¾ç‰‡ã€cssï¼‰éƒ½åŠ è½½å®Œæ¯•åæ‰è§¦å‘</p>
<h3 id="performance-çš„å…¶ä»–"><a href="#performance-çš„å…¶ä»–" class="headerlink" title="performance çš„å…¶ä»–"></a>performance çš„å…¶ä»–</h3><p><code>PerformanceEntry</code> å¯¹è±¡ç”¨æ¥æè¿°æ€§èƒ½æŒ‡æ ‡ã€‚åœ¨åŠ è½½å›¾ç‰‡ã€jsã€css èµ„æºçš„æ—¶å€™ä¼šç”Ÿæˆï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ mark()ã€‚<br>æœ‰ <code>name</code>ã€<code>entryType</code>ã€<code>startTime</code>ã€<code>duration</code> å››ä¸ªå±æ€§ã€‚<br><code>entryType</code> å¯ä»¥ä¸º paintã€resourceã€mark ç­‰ï¼Œpaint è®°å½• FP å’Œ FCPï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œresource å°±æ˜¯å†åŠ å¯¹åº” url çš„æ—¶é—´äº†ã€‚<br><code>performance.getEntries()</code> å¯ä»¥æ‹¿åˆ°å…¨éƒ¨çš„ entry åˆ—è¡¨ã€‚</p>
<h2 id="æ€§èƒ½ç›‘æ§æŒ‡æ ‡"><a href="#æ€§èƒ½ç›‘æ§æŒ‡æ ‡" class="headerlink" title="æ€§èƒ½ç›‘æ§æŒ‡æ ‡"></a>æ€§èƒ½ç›‘æ§æŒ‡æ ‡</h2><h3 id="TTFB-time-to-first-byte"><a href="#TTFB-time-to-first-byte" class="headerlink" title="TTFB(time to first byte)"></a>TTFB(time to first byte)</h3><p>é¦–å­—èŠ‚æ—¶é—´<br><code>responseStart - fetchStart</code></p>
<h3 id="FP-first-paint-å’Œ-FCP-first-contentful-paint"><a href="#FP-first-paint-å’Œ-FCP-first-contentful-paint" class="headerlink" title="FP(first paint) å’Œ FCP(first contentful paint)"></a>FP(first paint) å’Œ FCP(first contentful paint)</h3><p>FPï¼šé¦–æ¬¡ç»˜åˆ¶ï¼Œé¦–æ¬¡å‘å±å¹•ä¼ è¾“åƒç´ ï¼ˆæ¯”å¦‚éé»˜è®¤é¢œè‰²çš„èƒŒæ™¯ï¼‰<br>FCPï¼šé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼Œé¦–æ¬¡å‘å±å¹•ä¼ è¾“å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            document.write(&quot;123&quot;)</span><br><span class="line">        &#125;, 200)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>performance å·²ç»æ ‡å‡†åŒ–ï¼š<br><img src="https://imbant-blog.oss-cn-shanghai.aliyuncs.com/blog-img/1/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87%E4%B8%8E%E5%AE%9E%E7%8E%B02.jpg" alt="img"><br>å¯è§ FCP è¦æ¯” FP æ™šä¸€äº›ï¼ˆä¸ <code>document.write</code> æ‰§è¡Œçš„æ—¶é—´ç›¸å…³ï¼‰ï¼Œä¸¤è€…ä¹Ÿå¯èƒ½ç›¸åŒã€‚</p>
<p>æ­¤å¤–ï¼š</p>
<ul>
<li><code>domContentLoadedEventEnd - fetchStart</code> å¯ä»¥è¾ƒå¥½è¡¨ç°<strong>é¦–å±</strong>æ—¶é—´</li>
<li><code>domInteractive | domLoading - fetchStart</code> å¯ä»¥è¾ƒå¥½è¡¨ç°<strong>ç™½å±</strong>æ—¶é—´</li>
</ul>
<h3 id="TTI-time-to-intercative"><a href="#TTI-time-to-intercative" class="headerlink" title="TTI(time to intercative)"></a>TTI(time to intercative)</h3><p>é¦–æ¬¡äº¤äº’æ—¶é—´<br>Google å®šä¹‰çš„æŒ‡æ ‡ï¼Œä¸èƒ½å®Œå…¨ç”± performance api å¾—å‡ºï¼Œéœ€è¦æ»¡è¶³åœ¨ FCP ä¹‹åæœ‰5ç§’çš„æ—¶é—´å†…æ²¡æœ‰é•¿ä»»åŠ¡ï¼ˆè¶…è¿‡ 50ms çš„ä»»åŠ¡ï¼‰ã€ä¸è¶…è¿‡ä¸¤ä¸ªæ­£åœ¨å¤„ç†çš„ GET è¯·æ±‚ç­‰</p>
<h2 id="å¼‚å¸¸ç›‘æ§"><a href="#å¼‚å¸¸ç›‘æ§" class="headerlink" title="å¼‚å¸¸ç›‘æ§"></a>å¼‚å¸¸ç›‘æ§</h2><h3 id="è¯­è¨€å±‚é¢"><a href="#è¯­è¨€å±‚é¢" class="headerlink" title="è¯­è¨€å±‚é¢"></a>è¯­è¨€å±‚é¢</h3><p>åŒæ­¥å¼‚å¸¸ï¼štry catch è¯­æ³•<br>å¼‚æ­¥å¼‚å¸¸ï¼šéµå¾ª Promise çš„æœ€ä½³å®è·µï¼Œå†™å¥½ reject å’Œ catch å‡½æ•°</p>
<h3 id="æ¡†æ¶å±‚é¢"><a href="#æ¡†æ¶å±‚é¢" class="headerlink" title="æ¡†æ¶å±‚é¢"></a>æ¡†æ¶å±‚é¢</h3><p>React: Error Boundaries<br>class component: componentDidCatch æ–¹æ³•<br>hooks component: ç›®å‰è¿˜æ²¡æœ‰ç­‰ä»·å†™æ³•ï¼Œå®˜æ–¹è¯´ã€Œplan to add them soonã€</p>
<h3 id="æµè§ˆå™¨å±‚é¢"><a href="#æµè§ˆå™¨å±‚é¢" class="headerlink" title="æµè§ˆå™¨å±‚é¢"></a>æµè§ˆå™¨å±‚é¢</h3><table>
<thead>
<tr>
<th>api</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody><tr>
<td><code>window.onerror</code></td>
<td>å¯ä»¥æ•è·ï¼ˆ<strong>åŒæ­¥å’Œå¼‚æ­¥çš„</strong>ï¼‰JS è¿è¡Œæ—¶é”™è¯¯</td>
</tr>
<tr>
<td><code>window.addEventListener(&#39;error&#39;)</code></td>
<td>å¯ä»¥æ•è·ï¼ˆ<strong>åŒæ­¥å’Œå¼‚æ­¥çš„</strong>ï¼‰JS è¿è¡Œæ—¶é”™è¯¯ï¼Œä»¥åŠï¼ˆå…¨å±€çš„ imgã€scriptï¼‰èµ„æºåŠ è½½å¤±è´¥</td>
</tr>
<tr>
<td><code>window.addEventListener(&#39;unhandledrejection&#39;)</code></td>
<td>å¯ä»¥ç›‘å¬ Promise æŠ›å‡ºçš„æ²¡æœ‰è¢« catch çš„é”™è¯¯</td>
</tr>
<tr>
<td><code>element.onerror</code></td>
<td>æ•è·å•ä¸ªå…ƒç´ çš„èµ„æºåŠ è½½é”™è¯¯</td>
</tr>
</tbody></table>
<h3 id="js-error"><a href="#js-error" class="headerlink" title="js error"></a>js error</h3><p>window.onerror </p>
<h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise reject"></a>Promise reject</h3><p>unhandledrejection äº‹ä»¶</p>
<h3 id="èµ„æºåŠ è½½å¤±è´¥"><a href="#èµ„æºåŠ è½½å¤±è´¥" class="headerlink" title="èµ„æºåŠ è½½å¤±è´¥"></a>èµ„æºåŠ è½½å¤±è´¥</h3><p>window.addEventListener(â€˜errorâ€™)</p>
<h2 id="ä¸ŠæŠ¥æ–¹å¼-TODO"><a href="#ä¸ŠæŠ¥æ–¹å¼-TODO" class="headerlink" title="ä¸ŠæŠ¥æ–¹å¼ TODO:"></a>ä¸ŠæŠ¥æ–¹å¼ TODO:</h2><ul>
<li>image beacon: GET 1px gifï¼ˆæ–‡ä»¶ä½“ç§¯æœ€å°ã€è·¨åŸŸå‹å¥½ï¼‰</li>
<li>navigator.sendBeaconï¼ˆå¼‚æ­¥è¯·æ±‚ï¼Œä¸å½±å“é¡µé¢ unload å’ŒåŠ è½½ä¸‹ä¸€é¡µæ€§èƒ½ï¼‰</li>
</ul>
<h2 id="æ€§èƒ½ä¼˜åŒ–æ–¹å‘"><a href="#æ€§èƒ½ä¼˜åŒ–æ–¹å‘" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–æ–¹å‘"></a>æ€§èƒ½ä¼˜åŒ–æ–¹å‘</h2><p>TODO:</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/dxa8am44oz*lukk5ufhy">èš‚èšé‡‘æœå¦‚ä½•æŠŠå‰ç«¯æ€§èƒ½ç›‘æ§åšåˆ°æè‡´?</a><br><a target="_blank" rel="noopener" href="https://github.com/LightXJ/blog/issues/24">æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ï¼ˆäºŒï¼‰CSS/JS é˜»å¡ DOM è§£æå’Œæ¸²æŸ“</a><br><a target="_blank" rel="noopener" href="http://www.alloyteam.com/2020/01/14184/">å¦‚ä½•è¿›è¡Œ web æ€§èƒ½ç›‘æ§</a><br><a target="_blank" rel="noopener" href="https://web.dev/vitals/">Web æŒ‡æ ‡</a></p>
</div><div class="tags"><a href="/blog/tags/JS/"><i class="fa fa-tag"></i>JS</a><a href="/blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"><i class="fa fa-tag"></i>æµè§ˆå™¨</a></div><div class="post-nav"><a class="pre" href="/blog/2021/10/02/ES6%20%E5%90%88%E9%9B%86/">ES6 åˆé›†</a><a class="next" href="/blog/2021/07/20/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%B7%A8%E5%88%86%E5%8C%85%E5%A4%8D%E7%94%A8%E4%BB%A3%E7%A0%81%E6%96%B9%E6%A1%88/">å°ç¨‹åºè·¨åˆ†åŒ…å¤ç”¨ä»£ç æ–¹æ¡ˆ</a></div><div class="giscus"></div><script src="https://giscus.app/client.js" data-repo="imbant/blog" data-repo-id="MDEwOlJlcG9zaXRvcnkyNDkzOTc0NDM=" data-category="General" data-category-id="DIC_kwDODt2Aw84Ch79K" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://imbant.github.io/blog"/></form></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer"><span id="footer-copyright">Copyright Â© </span><a href="/blog/." rel="nofollow">imbAnt's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a><script>const tag = document.getElementById('footer-copyright');const year = new Date().getFullYear();tag.innerText += year + ' ';</script></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/gifFavIcon.js"></script></div></body></html>