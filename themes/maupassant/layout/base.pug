include _partial/helpers.pug

if page.title
  - var current_title = page.title
else
  - var current_title = config.title

if config.feed
  case config.feed.type
    when 'rss2'
      - var feed_type='application/rss+xml'
    when 'atom'
    default
      - var feed_type='application/atom+xml'

doctype html
html(lang=config.language)

  include _partial/head.pug

  body: .body_container
    #header
      .site-name
        h1.hidden= current_title
        a#logo(href=url_for('.'))= config.title
        p.description= config.subtitle
      #nav-menu
        - for (var i in theme.menu)
          +a_with_current(theme.menu[i].directory, __(theme.menu[i].page), theme.menu[i].icon)

    #layout.pure-g
      .pure-u-1.pure-u-md-3-4: .content_container
        //- TODO: 改为在 .md 中写入
        p Hi 👋，欢迎访问我的博客
        p 我是一名前端开发者，VS Code 插件和语言服务器开发者
        p 我目前正在构建基于 LSP 的 
          a(href='https://marketplace.visualstudio.com/items?itemName=craftLandstudio.ffugclanguage') 语言服务器
          | ，也在维护用 Go 构建的编译器。
        p 在
          a(href='/about/') 这里
          | 查看更多关于我的信息
        br
        p 我希望通过这个博客记录技术知识，提升影响力。如果你感兴趣，可以看看这些文章：
        br
        ul 
          li
            a(href='/2024/10/29/VS-Code-Thankyou/') 我为 VS Code 贡献了代码
          li
            a(href='2024/08/24/LSP1/') LSP 与 VS Code 插件开发 第一章
          li
            a(href='2023/03/30/怎么让-favicon-动起来/') 怎么让 favicon 动起来

        hr
        block content

      if theme.widgets_on_small_screens
        .pure-u-1.pure-u-md-1-4: #sidebar
          each item in theme.widgets
            != partial('_widget/' + item + '.pug', null, {cache: !config.relative_link})
      else
        .pure-u-1-4.hidden_mid_and_down: #sidebar
          each item in theme.widgets
            != partial('_widget/' + item + '.pug', null, {cache: !config.relative_link})
      .pure-u-1.pure-u-md-3-4
        != partial('_partial/footer.pug')

    if theme.totop == true
      include _partial/totop.pug
    include _partial/after_footer.pug
    script(type='text/javascript', src=url_for(theme.js) + '/gifFavIcon.js')
