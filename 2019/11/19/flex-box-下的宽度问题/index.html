<!DOCTYPE html><html lang="zh-CN"><head><meta name="google-site-verification" content="_s8zp9HC5xK3I7RCh_8RJrSUgYtyNgc09bZvTV11nFI"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta content="telephone=no" name="format-detection"><meta name="description" content="技术博客，记录语言服务器(LSP)开发、VS Code/Cursor 插件开发、生成式 AI 与 Agent 技术、前端开发和 golang"><meta name="keywords" content="前端,imbant,技术博客,浏览器,Electron,React,Vue,Node,Webpack,Vite,Chrome"><meta name="robots" content="index, follow"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><title>flex box 下的宽度问题 | imbAnt's blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZM9NGRYKWS"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-ZM9NGRYKWS');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><a id="logo" href="/blog/.">imbAnt's blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">flex box 下的宽度问题</h1><div class="post-meta">2019-11-19</div><div class="post-content"><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/17b1b445ecd4">https://www.jianshu.com/p/17b1b445ecd4</a></p>
<h2 id="flex-box-下影响子元素宽度的因素"><a href="#flex-box-下影响子元素宽度的因素" class="headerlink" title="flex box 下影响子元素宽度的因素"></a>flex box 下影响子元素宽度的因素</h2><p>首先，在 flex box 容器内，元素的 width 设置后是可以生效的，无需关注 display 属性。<br>即使 display 属性设置为 inline，也一样可以设置 width</p>
<p>有 4 个属性会影响元素宽度：</p>
<ol>
<li>width</li>
<li>flex-basis</li>
<li>flex-grow</li>
<li>flex-shrink</li>
</ol>
<p>因此，<strong>在 flex box 下，元素真实宽度可能与 width 值不同</strong>。解决方案如下：</p>
<h3 id="1-width-与-flex-basis"><a href="#1-width-与-flex-basis" class="headerlink" title="1. width 与 flex-basis"></a>1. width 与 flex-basis</h3><p>在定义元素宽度时，flex-basis 值比 width 优先级更高。<br>当然这种说法是有局限性的，flex-basis 值决定的其实是元素在主轴方向上的长度，默认情况下就是横向，也就和 width 值起同一个作用，但优先级比 width 高。<br><img src="https://imbant-blog.oss-cn-shanghai.aliyuncs.com/blog-img/6/flex-box-%E4%B8%8B%E7%9A%84%E5%AE%BD%E5%BA%A6%E9%97%AE%E9%A2%981.png" alt="img"></p>
<h3 id="2-flex-grow"><a href="#2-flex-grow" class="headerlink" title="2. flex-grow"></a>2. flex-grow</h3><p>flex-grow 规定元素如何分配容器的剩余空间。如果容器内元素的宽度之和小于容器宽度，这个属性就会生效，给子元素按比例分配宽度：<br>a、b、c 三个元素 width 之和为 10 + 20 + 40 = 70 px。容器宽度为 150px，剩余空间为 150 - 70 = 80 px。<br>这 80px 就是要分配给有 flex-grow 属性的元素：a 和 b，c 没设定这个值，不给它分配。分配规则是按值作为比例，a 分配 2 份，b 分配 1 份。<br>a 的最终宽度：10 + (80 * 2/3) = 63.3333px<br>b 的最终宽度：20 + (80 * 1/3) = 46.6667px<br><strong>可见虽然设置了 width，元素的真实宽度却与其值不同</strong><br><img src="https://imbant-blog.oss-cn-shanghai.aliyuncs.com/blog-img/6/flex-box-%E4%B8%8B%E7%9A%84%E5%AE%BD%E5%BA%A6%E9%97%AE%E9%A2%982.png" alt="img"></p>
<h3 id="3-flex-shrink"><a href="#3-flex-shrink" class="headerlink" title="3. flex-shrink"></a>3. flex-shrink</h3><p>flex-shrink 规定元素如何吸收超出容器的空间。与 flex-grow 相反，如果子元素加起来的宽度超过了容器元素，超出的部分将在设置了 flex-shrink 值的元素中减去，达到所有元素填满容器，却不超出的效果<br>a、b、c 三个元素的 width 之和为 70 + 90 + 40 = 200px，与容器 width 之差为 200 - 150 = 50px。<br>这 50px 需要在 a、b 子元素中减去，c 没设置这个值，不用减。<br>同样按比例分配要减去的值：a 分配 2/7，b 分配 5/7<br>a 最终宽度：70 - (50 * 2/7) = 55.7143px<br>b 最终宽度：90 - (50 * 5/7) = 54.2857px</p>
<p>可见虽然设置了 width，元素的真实宽度却与其值不同</p>
<p><img src="https://imbant-blog.oss-cn-shanghai.aliyuncs.com/blog-img/6/flex-box-%E4%B8%8B%E7%9A%84%E5%AE%BD%E5%BA%A6%E9%97%AE%E9%A2%983.png" alt="img"></p>
<h3 id="4-解决-flex-box-中元素宽度与-width-不同"><a href="#4-解决-flex-box-中元素宽度与-width-不同" class="headerlink" title="4. 解决 flex box 中元素宽度与 width 不同"></a>4. 解决 flex box 中元素宽度与 width 不同</h3><p>将 flex-grow 和 flex-shrink 属性设置为 0，保证真实宽度不会随其他元素变化。</p>
<h3 id="5-css-语法中的-flex-属性"><a href="#5-css-语法中的-flex-属性" class="headerlink" title="5. css 语法中的 flex 属性"></a>5. css 语法中的 flex 属性</h3><p>flex 是 flex-basis、flex-grow、flex-shrink 三个属性的简写</p>
</div><div class="tags"><a href="/blog/tags/CSS/"><i class="fa fa-tag"></i>CSS</a></div><div class="post-nav"><a class="pre" href="/blog/2019/12/11/%E5%AE%89%E5%8D%93%E5%BE%AE%E4%BF%A1-%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE-%E7%9B%B8%E5%85%B3%E8%B8%A9%E5%9D%91/">安卓微信 视频播放 相关踩坑</a><a class="next" href="/blog/2019/10/10/%E5%85%B3%E4%BA%8E-js-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/">关于 js 文件上传</a></div><div class="giscus"></div><script src="https://giscus.app/client.js" data-repo="imbant/blog" data-repo-id="MDEwOlJlcG9zaXRvcnkyNDkzOTc0NDM=" data-category="General" data-category-id="DIC_kwDODt2Aw84Ch79K" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://imbant.github.io/blog"/></form></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer"><span id="footer-copyright">Copyright © </span><a href="/blog/." rel="nofollow">imbAnt's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a><script>const tag = document.getElementById('footer-copyright');const year = new Date().getFullYear();tag.innerText += year + ' ';</script></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/gifFavIcon.js"></script></div></body></html>