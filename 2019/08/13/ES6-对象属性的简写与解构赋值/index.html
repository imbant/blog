<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>ES6 对象属性的简写与解构赋值 | imbAnt's blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/blog/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ES6 对象属性的简写与解构赋值</h1><a id="logo" href="/blog/.">imbAnt's blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ES6 对象属性的简写与解构赋值</h1><div class="post-meta">2019-08-13</div><div class="post-content"><h1 id="允许在对象中直接写变量而不写属性值，这样属性名就是变量名"><a href="#允许在对象中直接写变量而不写属性值，这样属性名就是变量名" class="headerlink" title="允许在对象中直接写变量而不写属性值，这样属性名就是变量名"></a>允许在对象中直接写变量而不写属性值，这样属性名就是变量名</h1><p>以下写法是等效的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="attr">func</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>和</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="function"><span class="title">func</span>(<span class="params"></span>)</span> &#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>func 为一个变量，为其赋值一个函数对象</p>
<h1 id="一个关于属性简写的例子解析："><a href="#一个关于属性简写的例子解析：" class="headerlink" title="一个关于属性简写的例子解析："></a>一个关于属性简写的例子解析：</h1><p>例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#123;count&#125;) =&gt; (&#123;count&#125;)</span><br></pre></td></tr></table></figure>

<p>解析： </p>
<ol>
<li><p>这是一个匿名函数，参数为一个对象，返回值也是一个对象。 </p>
</li>
<li><p>箭头函数的语法：</p>
</li>
<li><p>若写为 () =&gt; 1，则表示该函数返回值为 1</p>
</li>
<li><p>若写为 () =&gt; {1}，则表示该函数执行内容为一个表达式，值为 1，由于没有显式 return，返回值为 undefined</p>
</li>
<li><p>若想让箭头函数返回一个对象（由大括号包围），则需要在对象外边套一层圆括号，表示圆括号内是一个表达式。写为 () =&gt; ({a: 1})，表示返回一个对象，字段 a 的值为 1  </p>
</li>
<li><p>例子的参数：</p>
</li>
<li><p>参数类型为对象</p>
</li>
<li><p>ES6 解构赋值语法，相当于</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;x, y, z&#125; = obj1</span><br><span class="line"><span class="comment">// x=1, y=2, z=3</span></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">count</span>: <span class="number">400</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;count&#125; = obj2</span><br><span class="line"><span class="comment">// count = 400</span></span><br></pre></td></tr></table></figure></li>
<li><p>因此</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">&#123;count&#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 等效于</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;<span class="keyword">let</span> count = obj.count&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>因此，参数写法的意义是：显式获取参数对象的 count 字段，并新建一个同名变量，其他字段一概不要 </p>
</li>
<li><p>例子的返回值：</p>
</li>
<li><p>构造一个全新的对象并返回</p>
</li>
<li><p>这个对象中有一个字段也叫 count（也可以叫任何其他名字，只是正好和参数的字段重名了），值与参数中的 count 一样</p>
</li>
<li><p>由于字段重名，因此简写为 { count } </p>
</li>
<li><p>除去所有简写后，语法最简单（但是代码最多）的等效版本</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = obj.count</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>: count <span class="comment">// 冒号右边的 count 和上边 let 声明的是同一个变量</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="解构赋值相关"><a href="#解构赋值相关" class="headerlink" title="解构赋值相关"></a>解构赋值相关</h1><h2 id="对数组的解构"><a href="#对数组的解构" class="headerlink" title="对数组的解构"></a>对数组的解构</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[a, b] = [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment">// a = 3, b = 4</span></span><br></pre></td></tr></table></figure>
<h2 id="对对象的解构"><a href="#对对象的解构" class="headerlink" title="对对象的解构"></a>对对象的解构</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&#123;a, b&#125; = &#123;<span class="number">10</span>, <span class="number">20</span>&#125;)  <span class="comment">// 不是在声明 a b 变量的时候解构赋值，则需要在表达式外边加括号</span></span><br><span class="line"><span class="comment">// a = 10, b = 20</span></span><br></pre></td></tr></table></figure>
<p>这里默认了左边变量的顺序需要和右边期望赋值的属性名顺序要一样。<br>如果右边的对象来自函数返回值，里边各个字段的顺序就不一定明确了。<br>例如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;a, b&#125; = example()</span><br></pre></td></tr></table></figure>
<p>example 的返回值在这里是不清楚顺序的。但是我们很容易可以知道其中某些字段的名字。<br>例如，我们知道 example 函数返回的对象里有两个字段：foo 和 func。</p>
<p>可以这样用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">func</span>: a, <span class="attr">foo</span>:b&#125; = example() </span><br></pre></td></tr></table></figure>
<p>这样就无须知道返回值字段的顺序了。</p>
<p>解构赋值还支持默认值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">func</span>: a, <span class="attr">foo</span>: b = <span class="number">30</span>&#125; = example()</span><br></pre></td></tr></table></figure>
<p>这样即使右边没有 foo 这个字段，b 也有默认值 30</p>
<p>完整的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ex</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">foo</span>: <span class="number">30</span>, <span class="attr">func</span>: <span class="number">10</span>&#125; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> a, b</span><br><span class="line">  (&#123;<span class="attr">func</span>: a, <span class="attr">foo</span>: b = <span class="number">40</span>&#125; = ex())</span><br><span class="line">  </span><br><span class="line"><span class="comment">// a = 10, b = 30</span></span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/blog/tags/JS/"><i class="fa fa-tag"></i>JS</a><a href="/blog/tags/ES6/"><i class="fa fa-tag"></i>ES6</a></div><div class="post-nav"><a class="pre" href="/blog/2019/09/11/Token-Session-Cookie/">Token Session Cookie</a><a class="next" href="/blog/2019/08/11/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">持续集成</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://imbant.github.io/blog"/></form></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/blog/." rel="nofollow">imbAnt's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script></div></body></html>